<!DOCTYPE html>
<html>
<head>
<meta charset=UTF-8>
<meta name=viewport content="width=device-width, initial-scale=1.0">
<title>Alquerque</title>
<style>.black-piece,.piece-option:first-child span img{background-color:#fff}.black-piece,.cell,.white-piece{text-align:center}:root{--piece-size-mobile:35px;--piece-size-desktop:50px;--height-mobile:65px;--height-desktop:90px;--width-mobile:65px;--width-desktop:90px;--o-size-mobile:2px;--o-size-desktop:3px}@media screen and (max-width:767px){:root{--piece-size:var(--piece-size-mobile);--height:var(--height-mobile);--width:var(--width-mobile);--o-size:var(--o-size-mobile)}}.battle,.piece-option span img,.player-option span img{height:70px;width:70px}@media screen and (min-width:768px){:root{--piece-size:var(--piece-size-desktop);--height:var(--height-desktop);--width:var(--width-desktop);--o-size:var(--o-size-desktop)}.game-board{max-width:600px}}body{font-weight:bolder;margin:0}.seperator img{max-width:100%}.player-options{display:flex;justify-content:space-between}.piece-options,.player-options{display:flex;justify-content:center;align-items:center;margin:20px 0}.piece-option,.player-option{display:flex;flex-direction:column;align-items:center;margin:0 10px;cursor:pointer}.piece-option input[type=radio],.player-option input[type=radio]{display:none}.piece-option span,.player-option span{width:70px;height:70px;margin-bottom:20px;border:2px solid transparent;padding:25px}.piece-option:nth-child(2) span img{background-color:#000}.piece-option span img{opacity:.8;border-radius:50%}.piece-option{margin:0 20px}.player-option:nth-child(2) span{display:flex;justify-content:space-between;position:relative;align-items:center}.player-option:nth-child(2) span img{position:absolute;top:18%;left:2%;right:0}.player-option span img:nth-child(2){position:absolute;top:18%;left:40%;right:0}.piece-option input[type=radio]:checked+span,.player-option input[type=radio]:checked+span{background-image:url("./images/border-selection.svg");background-size:contain;background-repeat:no-repeat}.black-piece,.board-top svg,.lg-piece,.white-piece{height:var(--piece-size);width:var(--piece-size)}table{border:0 solid red;z-index:1}td{background-color:transparent}table#table{border-collapse:collapse}.board-container{position:relative;z-index:10}.board-design{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);pointer-events:none;z-index:-4}.black-piece{border-radius:50%;color:#fff}.white-piece{border:1px solid #000;border-radius:50%;background-color:#000}.lg-piece{background-color:green;border-radius:50%;opacity:.5}.green-border{outline:green solid 3px}.yellow-border{outline:var(--o-size) solid yellow}.cell{height:var(--height);width:var(--width);font-weight:700;display:inline-flex;justify-content:center;align-items:center}.bar{width:100px;height:5px;background-color:#333;margin:10px auto;border-radius:20px}canvas{position:absolute;top:0;left:0;z-index:-20;width:100vw;height:94vh}.background{position:fixed;display:flex;width:95%;top:0;left:50%;transform:translate(-50%,0);padding:2.5em;box-shadow:2px 3px 20px #000,0 0 525px #8f5922 inset;background:#dfd8c8;z-index:-100;height:100%}.instructions{margin:0 10px;text-align:start}ul li{margin-bottom:5px}@media (min-width:768px){.page{display:flex;justify-content:space-between}.game,.instructions{width:50%}}@media (max-width:768px){.page{display:flex;flex-direction:column}}.board-top{display:flex;justify-content:space-between;align-items:center;text-align:left}.replay{position:absolute;font-size:1.2em}.reset{font-size:1.5em;cursor:pointer}</style>
</head>
<body align=center>
<div class=background></div>
<div class=page>
<div class=game>
<h1 align=center style="margin:13px 0">A𝔩𝔮𝔲𝔢𝔯𝔮𝔲𝔢</h1>
<canvas id=celebrationCanvas></canvas>
<div class=seperator>
<img src=./images/border.svg alt=Border>
</div>
<div id=gameOptionsModal class=options-screen>
<div class=options-screen-content>
<div class=options-screen-body>
<h2 style=margin-top:1px>G𝔞𝔪𝔢 O𝔭𝔱𝔦𝔬𝔫𝔰</h2>
<div class=player-options>
<label class=player-option>
<input type=radio name=playerMode value=single checked>
<span class=single-player-icon>
<img src=./images/white-knight.svg alt="White Knight">
</span>
S𝔦𝔫𝔤𝔩𝔢 P𝔩𝔞𝔶𝔢𝔯
</label>
<label class=player-option>
<input type=radio name=playerMode value=multi>
<span class=multi-player-icon>
<img src=./images/black-knight.svg alt="Black Knight">
<img src=./images/white-knight.svg alt="White Knight">
</span>
M𝔲𝔩𝔱𝔦 P𝔩𝔞𝔶𝔢𝔯
</label>
</div>
<div class=piece-options>
<label class=piece-option>
<input type=radio name=playerColor value=black>
<span class=bpi></span>
B𝔩𝔞𝔠𝔨 P𝔦𝔢𝔠𝔢
</label>
<label class=piece-option>
<input type=radio name=playerColor value=white checked>
<span class=wpi></span>
W𝔥𝔦𝔱𝔢 P𝔦𝔢𝔠𝔢
</label>
</div>
<br />
<div class=startGameBtn>
<img src=./images/battle.svg alt=Battle class=battle>
<div>S𝔱𝔞𝔯𝔱 G𝔞𝔪𝔢</div>
</div>
</div>
</div>
</div>
<div class=board-container hidden align=center>
<div class=board-top>
<div class=sound>
<svg width=800px height=800px viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg>
<g id=volume-up>
<polygon fill=none points="2.9 9 6.9 9 11.9 3 11.9 21 6.9 16 1.9 16 1.9 9 2.9 9" stroke=#000000 stroke-linecap=round stroke-linejoin=round stroke-width=2 />
<path class=volbars d="M15.5,19.5a7.3,7.3,0,0,0,7-7.5,7.3,7.3,0,0,0-7-7.5 M15.5,15a3,3,0,0,0,0-6" fill=none stroke=#000000 stroke-linecap=round stroke-linejoin=round stroke-width=2 />
<path class=cross d="M15 8 L20 17Z M20 8 L15 17 Z" fill=none stroke=#000000 stroke-linecap=round stroke-linejoin=round stroke-width=2 />
</g>
</svg>
</div>
<div class=reset>ℜ𝔢𝔰𝔢𝔱</div>
<div class="player-turn white-piece"></div>
</div>
<div class=board-container>
<svg class=board-design>
</svg>
<table id=table>
</table>
</div>
</div>
</div>
<div class=instructions>
<h2 align=center>I𝔫𝔰𝔱𝔯𝔲𝔠𝔱𝔦𝔬𝔫𝔰</h2>
A𝔩𝔮𝔲𝔢𝔯𝔮𝔲𝔢 𝔦𝔰 𝔞 𝔱𝔴𝔬-𝔭𝔩𝔞𝔶𝔢𝔯 𝔞𝔟𝔰𝔱𝔯𝔞𝔠𝔱 𝔰𝔱𝔯𝔞𝔱𝔢𝔤𝔶 𝔤𝔞𝔪𝔢 𝔟𝔢𝔩𝔦𝔢𝔳𝔢𝔡 𝔱𝔬
𝔥𝔞𝔳𝔢 𝔬𝔯𝔦𝔤𝔦𝔫𝔞𝔱𝔢𝔡 𝔦𝔫 𝔱𝔥𝔢 𝔪𝔦𝔡𝔡𝔩𝔢 𝔢𝔞𝔰𝔱. 𝔗𝔥𝔢 𝔤𝔞𝔪𝔢 𝔦𝔰 𝔠𝔬𝔫𝔰𝔦𝔡𝔢𝔯𝔢𝔡 𝔱𝔬
𝔟𝔢 𝔱𝔥𝔢 𝔭𝔞𝔯𝔢𝔫𝔱 𝔬𝔣 𝔇𝔯𝔞𝔲𝔤𝔥𝔱𝔰 𝔞𝔫𝔡 𝔉𝔞𝔫𝔬𝔯𝔬𝔫𝔞. A𝔩𝔩 𝔭𝔦𝔢𝔠𝔢𝔰 𝔞𝔯𝔢 𝔩𝔞𝔦𝔡 𝔬𝔲𝔱
𝔦𝔫 𝔞 𝔭𝔞𝔱𝔱𝔢𝔯𝔫𝔢𝔡 𝔟𝔬𝔞𝔯𝔡 𝔴𝔦𝔱𝔥 𝔬𝔫𝔩𝔶 𝔬𝔫𝔢 𝔳𝔞𝔠𝔞𝔫𝔱 𝔭𝔬𝔦𝔫𝔱 𝔞𝔱 𝔱𝔥𝔢 𝔠𝔢𝔫𝔱𝔢𝔯.
𝔈𝔞𝔠𝔥 𝔭𝔩𝔞𝔶𝔢𝔯 𝔰𝔱𝔞𝔯𝔱𝔰 𝔴𝔦𝔱𝔥 12 𝔭𝔦𝔢𝔠𝔢𝔰 𝔴𝔥𝔦𝔠𝔥 𝔞𝔯𝔢 𝔭𝔩𝔞𝔠𝔢𝔡 𝔬𝔫 𝔬𝔭𝔭𝔬𝔰𝔦𝔱𝔢
𝔰𝔦𝔡𝔢𝔰. W𝔥𝔦𝔱𝔢 𝔰𝔱𝔞𝔯𝔱𝔰 𝔣𝔦𝔯𝔰𝔱. 𝔓𝔩𝔞𝔶𝔢𝔯𝔰 𝔞𝔩𝔱𝔢𝔯𝔫𝔞𝔱𝔢 𝔱𝔲𝔯𝔫 𝔱𝔬 𝔭𝔩𝔞𝔶. 𝔗𝔥𝔢
𝔞𝔦𝔪 𝔦𝔰 𝔱𝔬 𝔠𝔞𝔭𝔱𝔲𝔯𝔢 𝔞𝔩𝔩 𝔬𝔣 𝔬𝔭𝔭𝔬𝔫𝔢𝔫𝔱'𝔰 𝔭𝔦𝔢𝔠𝔢𝔰 𝔱𝔬 𝔴𝔦𝔫. 𝔗𝔥𝔢 𝔯𝔲𝔩𝔢𝔰 𝔞𝔯𝔢
𝔞𝔰 𝔣𝔬𝔩𝔩𝔬𝔴𝔦𝔫𝔤
<ul>
<li>ℑ𝔫 𝔢𝔞𝔠𝔥 𝔱𝔲𝔯𝔫 𝔞 𝔭𝔩𝔞𝔶𝔢𝔯 𝔠𝔞𝔫 𝔪𝔬𝔳𝔢 𝔞 𝔭𝔦𝔢𝔠𝔢 𝔬𝔫𝔢 𝔰𝔱𝔢𝔭 𝔞𝔩𝔬𝔫𝔤 𝔞 𝔪𝔞𝔯𝔨𝔢𝔡 𝔩𝔦𝔫𝔢 𝔱𝔬 𝔞𝔫 𝔞𝔡𝔧𝔞𝔠𝔢𝔫𝔱 𝔢𝔪𝔭𝔱𝔶 𝔭𝔬𝔦𝔫𝔱 (𝔞𝔫𝔶 𝔡𝔦𝔯𝔢𝔠𝔱𝔦𝔬𝔫; 𝔟𝔞𝔠𝔨, 𝔣𝔯𝔬𝔫𝔱 𝔬𝔯 𝔰𝔦𝔡𝔢𝔴𝔞𝔶𝔰).</li>
<li>
A 𝔭𝔦𝔢𝔠𝔢 𝔠𝔞𝔫 𝔠𝔞𝔭𝔱𝔲𝔯𝔢 𝔬𝔭𝔭𝔬𝔫𝔢𝔫𝔱 𝔭𝔦𝔢𝔠𝔢 𝔟𝔶 𝔧𝔲𝔪𝔭𝔦𝔫𝔤 𝔬𝔳𝔢𝔯 𝔦𝔱 𝔞𝔫𝔡 𝔩𝔞𝔫𝔡𝔦𝔫𝔤 𝔱𝔬 𝔢𝔪𝔭𝔱𝔶 𝔭𝔬𝔦𝔫𝔱 𝔧𝔲𝔰𝔱 𝔟𝔢𝔶𝔬𝔫𝔡 𝔦𝔱 (𝔰𝔦𝔪𝔦𝔩𝔞𝔯 𝔱𝔬 𝔡𝔯𝔞𝔲𝔤𝔥𝔱𝔰).
</li>
<li>
ℭ𝔞𝔭𝔱𝔲𝔯𝔢𝔰 𝔞𝔯𝔢 𝔪𝔞𝔫𝔞𝔱𝔬𝔯𝔶 𝔦𝔣 𝔭𝔬𝔰𝔰𝔦𝔟𝔩𝔢 𝔞𝔫𝔡 𝔪𝔬𝔯𝔢 𝔱𝔥𝔞𝔫 𝔬𝔫𝔢 𝔠𝔞𝔭𝔱𝔲𝔯𝔢 𝔠𝔞𝔫 𝔟𝔢 𝔡𝔬𝔫𝔢 𝔦𝔫 𝔱𝔥𝔢 𝔰𝔞𝔪𝔢 𝔱𝔲𝔯𝔫 𝔦𝔣 𝔭𝔬𝔰𝔰𝔦𝔟𝔩𝔢.
</li>
<li>
𝔗𝔥𝔢 𝔤𝔞𝔪𝔢 𝔦𝔰 𝔴𝔬𝔫 𝔟𝔶 𝔱𝔥𝔢 𝔭𝔩𝔞𝔶𝔢𝔯 𝔴𝔥𝔬 𝔠𝔞𝔭𝔱𝔲𝔯𝔢𝔰 𝔞𝔩𝔩 𝔬𝔣 𝔬𝔭𝔭𝔬𝔫𝔢𝔫𝔱 𝔭𝔦𝔢𝔠𝔢𝔰. A 𝔭𝔩𝔞𝔶𝔢𝔯 𝔠𝔞𝔫 𝔞𝔩𝔰𝔬 𝔩𝔬𝔰𝔢 𝔦𝔣 𝔥𝔢/𝔰𝔥𝔢 𝔥𝔞𝔰 𝔫𝔬 𝔞𝔳𝔞𝔦𝔩𝔞𝔟𝔩𝔢 𝔪𝔬𝔳𝔢𝔰.
</li>
</ul>
</div>
<div class=replay hidden>
<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 32 32"><path d="m31 25.5-4.2-4.2h-4.4l-1-1a7 7 0 0 0 .1-8.6L26 7.2C26.6 8 27 9 27.6 10c1.5-3.1 2.7-6.2 3.4-9.2-3 .8-6.1 2-9.2 3.4 1.1.5 2 1 2.9 1.8l-4.5 4.4a7 7 0 0 0-8.6 0L7.2 6C8 5.3 9 4.7 10.1 4.2A53 53 0 0 0 .9.8c.7 3 2 6.1 3.4 9.2.4-1 1-2 1.6-2.7l4.5 4.5a7 7 0 0 0 0 8.4l-1 1.1H5L1 25.5H5l-.6.7 1.3 1.3.6-.6V31l4.2-4.3v-4.2l1.2-1.2a7 7 0 0 0 8.2.1l1.3 1.3v4l4.2 4.3v-4l1.3 1.2L28 27l-1.4-1.5H31zM20 16c0 .8-.2 1.6-.6 2.3L17.2 16l2.3-2.3c.4.7.6 1.4.6 2.2zm-4-4.2c.8 0 1.6.3 2.2.7L16 14.7l-2.2-2.3c.6-.4 1.4-.7 2.3-.7zM11.7 16c0-.8.2-1.5.6-2.1l2.2 2.3-2 2c-.5-.6-.8-1.4-.8-2.2zM16 20c-.7 0-1.5-.2-2-.6l2-2 2.1 2c-.6.4-1.3.6-2 .6z"/></svg>
ℜ𝔢𝔭𝔩𝔞𝔶
</div>
</div>
<script>let e,t,l;t=.3,e=(e=1,n=.05,i=220,c=0,s=0,a=.1,o=0,r=1,h=0,d=0,p=0,u=0,f=0,g=0,y=0,w=0,m=0,v=1,b=0,M=0,k=Math,x=44100,L=2*k.PI,C=(h*=500*L/x/x),S=(i*=(1-n+2*n*k.random(n=[]))*L/x),q=0,$=0,H=0,z=1,T=0,B=0,I=0,E,A)=>{for(d*=500*L/x**3,y*=L/x,p*=L/x,u*=x,f=x*f|0,A=(c=x*c+9)+(b*=x)+(s*=x)+(a*=x)+(m*=x)|0;H<A;n[H++]=I)++B%(100*w|0)||(I=o?1<o?2<o?3<o?k.sin((q%L)**3):k.max(k.min(k.tan(q),1),-1):1-(2*q/L%2+2)%2:1-4*k.abs(k.round(q/L)-q/L):k.sin(q),I=(f?1-M+M*k.sin(L*H/f):1)*(0<I?1:-1)*k.abs(I)**r*t*e*(H<c?H/c:H<c+b?1-(H-c)/b*(1-v):H<c+b+s?v:H<A-m?(A-H-m)/a*v:0),I=m?I/2+(m>H?0:(H<A-m?1:(A-H)/m)*n[H-m|0]/2):I),q+=(E=(i+=h+=d)*k.cos(y*$++))-E*g*(1-1e9*(k.sin(H)+1)%2),z&&++z>u&&(i+=p,S+=p,z=0),!f||++T%f||(i=S,h=C,z||=1);return(e=l.createBuffer(1,A,x)).getChannelData(0).set(n),(i=l.createBufferSource()).buffer=e,i.connect(l.destination),i.start(),i},l=new AudioContext;const n=document.querySelector(".options-screen"),i=document.querySelector(".board-container"),c=document.querySelector(".startGameBtn"),s=document.querySelector(".board-design"),a=document.querySelector(".instructions"),o=document.querySelector(".sound"),r=document.querySelector(".cross"),h=document.querySelector(".volbars"),d=document.querySelector(".player-turn"),p=document.querySelector(".game"),u=document.querySelector(".board-top"),f=document.querySelector(".bpi"),g=document.querySelector(".wpi");r.style.display="none";let y={yhp:[],ghp:[],nbp:12,nwp:12};document.addEventListener("keyup",(function(e){"Enter"===e.key&&(e.preventDefault(),1==i.hidden&&c.click())})),document.querySelector(".reset").addEventListener("click",(()=>{window.location.reload()})),o.addEventListener("click",(l=>{t=0==t?.3:0,h.style.display="none"===h.style.display?"":"none",r.style.display="none"===r.style.display?"":"none",e(2.08,.05,495,.01,.01,0,0,.93,-20,0,323,.08,.03,0,-279,.6,.02,1,.01,0)})),f.innerHTML=T("#000"),f.children[0].style.backgroundColor="white",f.children[0].style.borderRadius="50%",g.innerHTML=T("#fff"),g.children[0].style.backgroundColor="black",g.children[0].style.borderRadius="50%",d.innerHTML=T("#fff"),c.addEventListener("click",(function(){n.hidden=!0,i.hidden=!1,function(){const e=document.querySelectorAll('input[name="playerMode"]'),t=document.querySelectorAll('input[name="playerColor"]');let l="",n="";e.forEach((e=>{e.checked&&(l=e.value)})),t.forEach((e=>{e.checked&&(n=e.value)})),y.pm=l,y.pc=n}(),function(e){for(let t=0;t<v;t++){let l=e.insertRow();for(let e=0;e<v;e++){let n=!0;x%2==1&&(n=!1);let i=l.insertCell(),c=document.createTextNode("");i.classList.add("cell");let s="e";t<=1||2==t&&e<=1?s="b":(t>2||2==t&&e>2)&&(s="w"),i.appendChild(c);const a=z(i);b[t][e]=new L(i,t,e,s,a,n),b[t][e].drawp(),i.addEventListener("click",(l=>S(l,t,e))),x++}}}(w),function(){const e=b[0][0].cc,t=b[4][4].cc;m.innerHTML=`<rect x=${e.x} y=${e.y} width=${t.y-e.y} height=${t.x-e.x} stroke-width=${k} stroke="black" fill="transparent" />`;const l=[[1,0,1,4],[2,0,2,4],[3,0,3,4],[0,1,4,1],[0,2,4,2],[0,3,4,3],[0,2,2,0],[0,2,2,4],[2,0,4,2],[2,4,4,2],[0,0,4,4],[0,4,4,0]];for(let e in l){const t=b[l[e][0]][l[e][1]].cc.x,n=b[l[e][0]][l[e][1]].cc.y,i=b[l[e][2]][l[e][3]].cc.x,c=b[l[e][2]][l[e][3]].cc.y;m.innerHTML+=`<line x1=${t} x2=${i} y1=${n} y2=${c} stroke-width=${k} stroke="black"/>`}}(),H(),s.style.height=w.offsetHeight,s.style.width=w.offsetWidth,u.style.width=w.offsetWidth+"px","single"==y.pm&&"black"==y.pc&&$()}));let w=document.querySelector("#table");const m=document.querySelector(".board-design");let v=5,b=function(e,t){var l=new Array(e);for(let n=0;n<e;n++)l[n]=new Array(t);return l}(v,v),M="w";const k="2";let x=0;function L(t,l,n,i,c,s){this.pc=t,this.i=l,this.j=n,this.t=i,this.cc=c,this.cmd=s,this.pk=[],this.empxy=[],this.yh=!1,this.kp=[],this.nei=[],this.drawp=function(){let e=`${this.i},${this.j}`;e="","b"==this.t?this.pc.innerHTML=`<div class="black-piece">${T("#000")}</div>`:"w"==this.t?this.pc.innerHTML=`<div class="white-piece">${T("#fff")}</div>`:"lg"==this.t?this.pc.innerHTML='<div class="lg-piece"></div>':this.pc.innerHTML=""},this.getn=function(e){let t=this.getpn(),l=[];for(let n=0;n<t.length;n++){let i=this.i+t[n][0],c=this.j+t[n][1];i>4||i<0||c>4||c<0||b[i][c].t==e&&(l=l.concat([[i,c,t[n][0],t[n][1]]]))}return l},this.getkillpieces=function(){let e=[],t=[];e="w"==M?this.getn("b"):this.getn("w");for(let l=0;l<e.length;l++){let n=[e[l][2]+e[l][2],e[l][3]+e[l][3]],i=this.i+n[0],c=this.j+n[1];i>4||i<0||c>4||c<0||("e"!=b[i][c].t&&"lg"!=b[i][c].t||(t=t.concat([[i,c,e[l][0],e[l][1]]])))}return t},this.getpn=function(){let e=[[-1,0],[0,1],[1,0],[0,-1]];return this.cmd&&(e=e.concat([[-1,-1],[-1,1],[1,1],[1,-1]])),e},this.handlec=function(t){let l=this.getkillpieces();if(y.ghp=l,"lg"==this.t){let l=!1;this.updatep(t.t),t.updatep("e");const n=this.i-t.i,i=this.j-t.j;if(2==Math.abs(n)||2==Math.abs(i)){e(1,.05,817,.04,.1,.35,3,.7,.7,.9,0,0,0,1.4,25,.3,0,.43,.06,.33);let c=t.i+n/2,s=t.j+i/2;b[c][s].updatep("e"),"w"==M?y.nbp--:y.nwp--,t.hp(t.getkillpieces(),"e"),l=!0}l||e(1.03,.05,476,0,.01,.06,1,1.49,-5.9,-3.2,0,0,0,0,0,0,0,.59,.01,0),t.hp(t.getn("lg"),"e");let c=!0;if(l){let e=this.getkillpieces();this.hp(e,"lg"),this.addClass("green-border");for(let e=0;e<y.yhp.length;e++){const l=y.yhp[e][0],n=y.yhp[e][1];l!=t.i&&n!=t.j&&(b[l][n].removeClass("yellow-border"),b[l][n].yh=!1)}y.yhp=[],c=0===e.length}return c}if(t.resetPiece(),l.length>0)this.hp(l,"lg");else{let e=this.getn("e");this.hp(e,"lg"),y.ghp=e}return t.t==this.t&&(t.removeClass("green-border"),t.addClass("yellow-border"),t.yh=!0),this.removeClass("yellow-border"),this.yh=!1,this.addClass("green-border"),!1},this.hp=function(e,t){for(let l=0;l<e.length;l++){let n=e[l][0],i=e[l][1];b[n][i].updatep(t)}},this.resetPiece=function(){let e=this.getkillpieces();if(e.length>0)this.hp(e,"e");else{let e=this.getn("lg");this.hp(e,"e")}},this.updatep=function(e){this.t=e,this.drawp()},this.addClass=function(e){this.pc.querySelector("div").classList.add(e)},this.removeClass=function(e){this.pc.querySelector("div").classList.remove(e)}}let C=[2,2];function S(e,t,l,n=!0){if("single"==y.pm&&"black"==y.pc&&"w"==b[t][l].t&&n)return;if("single"==y.pm&&"white"==y.pc&&"b"==b[t][l].t&&n)return;if("e"==b[t][l].t)return;if(!b[t][l].yh&&"lg"!=b[t][l].t)return;if("w"==b[t][l].t&&"b"==M)return;if("b"==b[t][l].t&&"w"==M)return;const i=C[0],c=C[1];let s=b[i][c];const a=s.t;let o=b[t][l].handlec(s);o&&(M="w"==M?"b":"w","w"==M?(d.classList.remove("black-piece"),d.classList.add("white-piece"),d.innerHTML=T("#fff")):(d.classList.remove("white-piece"),d.classList.add("black-piece"),d.innerHTML=T("#000"))),a==b[t][l].t&&o&&H(),C=[t,l];const r="white"==y.pc?"b":"w";"single"==y.pm&&M==r&&o&&a==b[t][l].t&&$()}const q=e=>new Promise((t=>setTimeout(t,e)));async function $(){let e=y.yhp[Math.floor(Math.random()*y.yhp.length)];await q(500),S(0,e[0],e[1],!1);let t=y.ghp[Math.floor(Math.random()*y.ghp.length)];for(await q(500),S(0,t[0],t[1],!1);0!=y.ghp.length;)t=y.ghp[Math.floor(Math.random()*y.ghp.length)],await q(500),S(0,t[0],t[1],!1)}function H(){let t=[],l=[];0!=y.nwp&&0!=y.nbp||(setTimeout((()=>e(2.06,0,800,.03,.44,.32,2,1.35,0,0,0,0,.3,.1,0,0,0,.31,.02,.08)),1),setTimeout((()=>e(2.06,0,800,.03,.44,.32,2,1.35,0,0,0,0,.3,.1,0,0,.26,.31,.02,.08)),550),0==y.nwp?E("𝔅𝔩𝔞𝔠𝔨"):E("𝔚𝔥𝔦𝔱𝔢"),a.remove(),p.style.width="100%",i.hidden=!0),y.yhp=[];for(let e=0;e<b.length;e++)for(let n=0;n<b[e].length;n++)if(b[e][n].t==M){if(b[e][n].getkillpieces().length>0)t=t.concat([[e,n]]);else{b[e][n].getn("e").length>0&&(l=l.concat([[e,n]]))}}else"e"!=b[e][n].t&&(b[e][n].removeClass("green-border"),b[e][n].removeClass("yellow-border"),b[e][n].yh=!1);if(t.length>0){for(let e=0;e<t.length;e++){let l=t[e][0],n=t[e][1];b[l][n].addClass("yellow-border"),b[l][n].yh=!0}y.yhp=t}else{for(let e=0;e<l.length;e++){let t=l[e][0],n=l[e][1];b[t][n].addClass("yellow-border"),b[t][n].yh=!0}y.yhp=l}}function z(e){const t=e.clientWidth/2,l=e.clientHeight/2;return{x:t+e.offsetLeft,y:l+e.offsetTop}}function T(e){return`<svg xmlns="http://www.w3.org/2000/svg" version="1.0" viewBox="0 0 900 900"><g fill="${e}"><path d="M413 1a460 460 0 0 0-225 84A484 484 0 0 0 31 284l-15 46-3 11A502 502 0 0 0 1 495c2 19 8 52 12 66l3 11a414 414 0 0 0 56 125 528 528 0 0 0 107 115l10 6a387 387 0 0 0 38 24 528 528 0 0 0 87 38l13 4a439 439 0 0 0 243 1l11-4 9-2 13-5a114 114 0 0 0 15-6l10-4 17-8a102 102 0 0 0 17-9 252 252 0 0 0 20-11l14-9c51-33 96-78 129-129l9-14 2-3 5-9a540 540 0 0 0 41-100 402 402 0 0 0 17-85l1-36-1-36-3-14a409 409 0 0 0-62-183l-12-18a694 694 0 0 0-20-28 479 479 0 0 0-106-97l-14-9-3-2-8-4a366 366 0 0 0-41-21l-32-13-9-3A545 545 0 0 0 449 0l-36 1zm68 107a353 353 0 0 1 82 18l7 2a431 431 0 0 1 57 28l14 9 26 19a363 363 0 0 1 110 163 338 338 0 0 1-61 322 358 358 0 0 1-146 105 350 350 0 0 1-269-12 347 347 0 0 1-180-415l10-29a343 343 0 0 1 129-155l8-5a285 285 0 0 1 56-28c13-5 36-12 56-16 19-4 18-4 50-7 10-1 34-1 51 1z"/><path d="M432 160c-15 1-22 1-38 5a235 235 0 0 0-56 16 288 288 0 0 0-72 43l-9 8a260 260 0 0 0-42 44 285 285 0 0 0-55 212 274 274 0 0 0 20 75 285 285 0 0 0 42 71l8 9a251 251 0 0 0 63 55l9 5 33 17 14 5 6 2 4 1a274 274 0 0 0 127 13 274 274 0 0 0 105-35 313 313 0 0 0 77-63l8-9a313 313 0 0 0 50-93 274 274 0 0 0 13-127 274 274 0 0 0-35-105 290 290 0 0 0-273-149zm29 125c4 3 12 10 17 18l3 4a273 273 0 0 1 19 24l13 18c26 33 26 33 30 33l9-2 11-3 11-3 21-5 11-4c4 0 9-2 11-3 6-2 15-1 20 1s12 9 14 14 3 15 1 20l-10 32c-3 13-4 17-6 20l-3 11-2 10a561 561 0 0 0-15 52l-4 11-3 11-3 10-3 11c-2 9-10 17-18 19l-137 1c-149 0-138 1-147-8l-5-7-1-4-4-10c0-4-2-8-3-11l-3-10c0-4-2-9-3-11l-5-20-6-22c-1-3-3-7-3-11l-4-10-3-11-3-11-3-10-3-11-3-11-3-10c-2-5-1-15 1-20s9-12 14-14 14-3 20-1c2 1 7 3 11 3l11 3 11 3 11 3 10 3a1036 1036 0 0 0 20 5c4 0 4 0 30-33l13-18a1426 1426 0 0 0 19-24l3-5a89 89 0 0 1 8-9c6-7 12-10 21-10 5 0 8 0 12 2z"/><path d="M443 360a1519 1519 0 0 0-43 55 98 98 0 0 1-19 21c-5 3-6 3-13 3l-13-1-22-7-10-3c-8-2-12-2-13-1l5 21 4 11 3 10a776 776 0 0 1 8 32l3 10 4 11 1 6 1 3 110 1h109l2-6 6-21 4-13 3-10 2-9 3-10 4-13 3-10c2-10 3-12 2-13s-2-1-23 5l-10 3-11 3-13 1c-7 0-8 0-13-3-4-3-9-8-18-19a16099 16099 0 0 0-50-64l-6 7z"/></g></svg>`}const B=document.getElementById("celebrationCanvas"),I=B.getContext("2d");function E(e){B.width=window.innerWidth,B.height=window.innerHeight;const t='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ',l=new Image;l.src=`${t}fill="%23C0C0C0" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M17 3h4v4l-5 5 2 3 2-2 1 2-2 2 3 3-2 2-3-3-2 2-2-1 2-2-3-2-3 2 2 2-2 1-2-2-3 3-2-2 3-3-2-2 1-2 2 2 2-3-5-5V3h4l5 5 5-5zm-7 10-3 3 1 1 3-3-1-1zm9-8h-1l-5 5 1 1 5-5V5zM5 5v1l11 11 1-1L6 5H5z"/></svg>`;const n=new Image;n.src=`${t}fill="%23DC143C" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M17 3h4v4l-5 5 2 3 2-2 1 2-2 2 3 3-2 2-3-3-2 2-2-1 2-2-3-2-3 2 2 2-2 1-2-2-3 3-2-2 3-3-2-2 1-2 2 2 2-3-5-5V3h4l5 5 5-5zm-7 10-3 3 1 1 3-3-1-1zm9-8h-1l-5 5 1 1 5-5V5zM5 5v1l11 11 1-1L6 5H5z"/></svg>`;const i=new Image;i.src=`${t}fill="%23D2B48C" viewBox="0 0 512 512"><path d="M479 111a16 16 0 0 0-13-14c-86-16-122-28-200-63-8-3-13-3-20 0-78 35-114 47-200 63a16 16 0 0 0-13 14c-4 61 4 118 24 170a349 349 0 0 0 72 112c44 47 94 75 119 86a20 20 0 0 0 16 0c27-11 74-38 119-86a349 349 0 0 0 72-112c20-52 28-109 24-170Z"/></svg>`;const c=new Image;c.src=`${t}fill="%238B4513" viewBox="0 0 512 512"><path d="M479 111a16 16 0 0 0-13-14c-86-16-122-28-200-63-8-3-13-3-20 0-78 35-114 47-200 63a16 16 0 0 0-13 14c-4 61 4 118 24 170a349 349 0 0 0 72 112c44 47 94 75 119 86a20 20 0 0 0 16 0c27-11 74-38 119-86a349 349 0 0 0 72-112c20-52 28-109 24-170Z"/></svg>`;const s=new Image;s.src=`${t}fill="%23FFD700" viewBox="0 0 640 512"><path d="M528 448H112c-9 0-16 7-16 16v32c0 9 7 16 16 16h416c9 0 16-7 16-16v-32c0-9-7-16-16-16zm64-320a48 48 0 0 0-44 68l-72 43c-15 9-35 4-44-11L350 85a48 48 0 0 0-30-85 48 48 0 0 0-30 85l-82 143c-9 15-29 20-44 11l-72-43c2-6 4-13 4-20a48 48 0 1 0-40 47l72 193h384l72-193 8 1a48 48 0 0 0 0-96z"/></svg>`;const a=new Image;a.src=`${t}fill="%23800080" viewBox="0 0 640 512"><path d="M528 448H112c-9 0-16 7-16 16v32c0 9 7 16 16 16h416c9 0 16-7 16-16v-32c0-9-7-16-16-16zm64-320a48 48 0 0 0-44 68l-72 43c-15 9-35 4-44-11L350 85a48 48 0 0 0-30-85 48 48 0 0 0-30 85l-82 143c-9 15-29 20-44 11l-72-43c2-6 4-13 4-20a48 48 0 1 0-40 47l72 193h384l72-193 8 1a48 48 0 0 0 0-96z"/></svg>`;const o=B.width/2,r=B.height/2,h=document.querySelector(".replay");function d(){const e=Math.random()*Math.PI*2,t=50*Math.random()+10,h=o+Math.cos(e)*t,d=r+Math.sin(e)*t,p=function(){const e=["sword","shield","crown"];return e[Math.floor(Math.random()*e.length)]}(),u=function(e){let t=null;switch(e){case"sword":t=Math.random()<.5?l:n;break;case"shield":t=Math.random()<.5?i:c;break;case"crown":t=Math.random()<.5?s:a}return t}(p);return{x:h,y:d,shape:p,shapeImage:u,alpha:1}}h.hidden=!1,h.style.left=o-20+"px",h.style.top=r-30+"px",h.addEventListener("click",(()=>{window.location.reload()}));const p=[];!function t(){I.clearRect(0,0,B.width,B.height),p.length<70&&p.push(d()),p.forEach(((e,t)=>{I.globalAlpha=e.alpha;I.drawImage(e.shapeImage,e.x-15,e.y-15,30,30);const l=e.x-o,n=e.y-r,i=Math.atan2(n,l);e.x+=4*Math.cos(i),e.y+=4*Math.sin(i),e.alpha-=.01,e.alpha<=0&&(p.splice(t,1),p.push(d()))})),I.font="23px Berry Rotunda",I.fillStyle="black",I.fillText(`P𝔩𝔞𝔶𝔢𝔯 ${e} 𝔗𝔯𝔦𝔲𝔪𝔭𝔥𝔰!`,o-105,r+150),requestAnimationFrame(t)}()}</script>
</body>
</html>